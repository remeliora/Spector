# Основные изменения COMMIT_10

### (05.09.2024)

## 1) Решена проблема с `fetchType`

Проблема с подгрузкой данных была по причине того, что выполнялся сложный запрос к базе, а именно поиск списка параметров устройства в зависимости от типа устройства.
Сложный он был так как прямой связи между сущностями `Device` и `Parameter` нет, только чрез родительскую таблицу `DeviceType`.
А так как большинство слоёв приложения работало с базой напрямую и в контексте одной транзакции, то это и создовало ошибку.
Решением стал перевод скрипта-опроса и сервиса `DataBaseService` на взаимодействие с базой через шаблонный слой DTO (Data Transfer Object).
Теперь `fetchType.EAGER` установлена на всех связях у сущностей, а с этим и скорость приложения увеличилась.

## 2) Скрипт-опрос переделан в асинхронный режим

Скрипт переписан на использование асинхронного режима работы, тем самым исключена ошибка при обмене данными с устройствами.

## 3) Микросервис CHECKER

Пока в разработке микросервис CHECKER для обработки различных проверок и исключений.
Реализованы в отдельности микросервисы для проверки подключения к БД и подключения устройств по IP и SNMP.

